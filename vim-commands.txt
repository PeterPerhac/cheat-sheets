. (full stop) repeats last command
; (semicolon) repeats last motion (t/f, T/F)
, (comma) reverse last motion (t -> T, f -> F)
@: repeats last :command

remove all blank lines
	:g/^\s*/d
remove all lines _not_ matching a pattern
	:g!/somepattern/d

* can use d_ to send all matched lines to blackhole register, which will be faster


x,X (del/backspace) without entering insert mode


~ toggle case (a -> A, A -> a)
S substitute whole line
C change to EOL


H move to screen top


copy all lines matching a pattern into register (a)
qaq:g/pattern/y A

	here, first three commands q,a,q will clera the a register
	last command :g/pattern/y A is effectively global YANK of lines matching into register a (captial A for _appending_ into a)

=====
UNDO/REDO
=====

u
	to undo
Ctrl+r
	to un-undo
	
	
=====
NAVIGATING
=====
backwards by pressing Ctrl+o
forwards by Tabbing
can jump to any line number by typing the number followed by capital G

can easily place marks in file, like so : ma mb mc md etc...
can then navigate back to these marks like so: `a `b `c `d etc... (note, it's a backtick)


====
BLOCK EDITING
====

Ctrl-v % Shift-i // Esc
    Ctrl-v to enter visual block edit mode
    % motion to visually edit until next matching bracket
    Shift-i means insert at start of line
    // is to be inserted
    Esc to escape visual block editing mode

Ctrl-v % $ Shift-a , Esc
    in a similar manner will append comma to the end of each line in the current block
    trick is first need to move cursor to end of line $ and then "append" with Shift-a
    whatever is typed prior to pressing Esc will be appended to the end of each line in the block

====
TAGS (xml / html)
====
Selecting insides/outsides of xml tags
===

vat
    select outside tag in visual mode
vatat
    select outside-outside tag in visual mode
vatatat
    you acn guess...
o
    jump to opposite tag, while still in visual mode

vit
    select the inside (/innerHtml) of the current tag
vitit
    select the inside (/innerHtml) of the parent tag
vititit
    you can guess...


=====
COPY-PASTING
=====

copying is called Yanking and so the command y is for yanking
pasting is called Pasting and so the command p is for pasting
cutting is same as deleting - any deleted lines end up in a default register, so can just be pasted after deleting


SELECT TEXT
	press V then up/down arrows to select text
		then press y to copy or d to cut

register can be cleared by recording nothing into it, e.g. to clear the register a, type qaq
to access register a, use double quotes, e.g. to paste contents of register, use the command "ap

copy all lines matching a pattern like so:
	qaq:g/pattern/y A
optionally, open new buffer using the :new command
and paste the contents of the a register into it
	"ap

MORE EXAMPLES

to copy the current line into register k, you can type
	"kyy
Or you can append to a register by using a capital letter
	"Kyy
You can then move through the document and paste it elsewhere using
	"kp
To paste from system clipboard ("+ is the sytem clipboard register)
	"+p
To access all currently defined registers type
	:reg



to DUPLICATE A LINE use a combination of yank and paste like so:
YP
	or
Yp
	or
yyp

(yy to yank current line, Y is the same as yy)
(p pastes after the cursor, P paste before the cursor)



====
MACROS
====
q<letter><commands>q
    records a series of commands into a
@a
    replays macro a
@@
    replays previous macro


=====
SEARCHING
=====

/ or ? followed by pattern, then press ENTER to perform the search
	n or N to navigate to next/previous search match


*
	to search for next occurrence of word currently under cursor
[I
	to get a listing of all occurrences of word currently under cursor


** interesting settings for searching

:set hlsearch - to enable search highlighting
:set incsearch - show match as search proceeds
:set ignorecase - case insensitive
:set smartcase - use case if any caps used 


====
OTHER SET-tings
====
:set nu
    sets line numbering
:set nonumber
    un-sets line numbering
:set list
:set nolist
    sets and unsets the display of invisible characters, like spaces and tabs, etc.

=====
COMMAND HISTORY
=====

:his
	to list command history
:his /

	to list search history

:<up/down> to go through previous commands
/<up/down> to go through previous searches


=====
CHANGING
=====
ci)    or    ci" (or any other paired character like ] } etc)
    Changes all text inside quotes or brackets
    Similarly, to change only text from current cursor position up till the next bracket/quote, use:
ct)    or    ct"
    Change 'till, erases all text up to the first occurrence of character pressed after ct


=====
REPLACING (SUBSTITUTING)
=====
:%s/searchFor/replaceWith/g
	:% across all lines
	/g across the matched line, replace all matched occurrences, rather than just fist
:s/search/replace/
	on current line, just the first occurrence


can reference captured groups in the _replace_ by using \1 \2 etc (\0 references the entire match)
however, the _search_ part needs to escape the capturing groups' parentheses like so:
	:%s/\(wrapInQuotes\)/"\1"/g

	

to repeat last : command
@:
@@


=====
CLOSING and (not) SAVING
=====

:w
	write current buffer to file (effectively SAVE)
:wa
	write all buffers (save all files)
:wq
	write and quit


:up
	update
:x
	update and quit

:w and :wq will always udate the timestamp, as they will always write the buffer out to the file
:up and :x will not update timestamp if there are no changes to write. Update will only write if there's any changes to update in the underlying file

mental checklist
- do I want to write the file? (w) 
- do I want to quit the file? (q) 
- do I want to quit ALL the files? (a) 
- do I want to write/abandon any changes? (!) 


ZZ	Write current file, if modified, and exit. (same as :x)
ZQ	Quit current file and exit (same as ":q!").



=====
JOINING/SPLITTING LINES
=====

gJ
    to join

splitting done by replacing a character - e.g. a space - with Enter - i.e. r<Enter>
if no character to replace, just enter insert mode and press Enter
    or
yank a blank line and paste as many times as required, e.g. 2p

join multiple lines by selecting them in visual mode, V, then press J
join all lines by pressing:
    ggVGJ
        gg - first line
        V - visual line select
        G - last line
        J - join


=====
BUFFERS
=====

:new
:edit
    reload current buffer from underlying file (if edited outside vim)
:edit <file>
    opens a file in vim
:ls
	list all open buffers
:bd
    buffer delete (effectively close the current file)


=====
VARIOUS
=====
insert new line with o or O but this will leave you in insert mode
dd to delete a line
d$ to delete from current cursor position to the end of line
2dd to delete 2 lines

sort lines by selecting them (Ctrl+V to visual mode, line selection), then running the sort command like so:
    :sort


=====
LINKS TO INTERESTING PAGES
=====
using the g command for global pattern matching
	http://vim.wikia.com/wiki/Power_of_g
using vim buffers
	http://vim.wikia.com/wiki/Vim_buffer_FAQ
very nice collection of tips
	https://www.cs.swarthmore.edu/help/vim/home.html
multiline editing
    http://stackoverflow.com/a/11790464/81520
visual mode selecting xml tags
    http://stackoverflow.com/a/10881471/81520

